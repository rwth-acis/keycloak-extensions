{"version":3,"sources":["../../../src/app/content/signingin-page/SigningInPage.tsx"],"names":["React","withRouter","Button","DataList","DataListAction","DataListItemCells","DataListCell","DataListItem","DataListItemRow","Stack","StackItem","Title","TitleLevel","DataListActionVisibility","Dropdown","DropdownPosition","KebabToggle","AIACommand","TimeUtil","AccountServiceContext","ContinueCancelModal","Msg","ContentPage","ContentAlert","KeycloakContext","css","SigningInPage","Component","constructor","props","context","credentialId","userLabel","doDelete","then","getCredentialContainers","success","state","credentialContainers","Map","doGet","response","allContainers","containers","data","forEach","container","categoryMap","get","category","set","type","setState","console","log","credElementId","credType","credId","item","substring","render","renderCategories","Array","from","keys","map","h2","renderTypes","credTypeMap","keycloak","index","typeArray","renderCredTypeTitle","renderUserCredentials","renderEmptyRow","length","isLast","credContainer","userCredentials","removeable","displayName","localizedDisplayName","localize","credential","hasOwnProperty","createdDate","strCreatedDate","format","updateAIA","updateAction","id","credentialRowCells","handleRemove","credRowCells","push","setupAction","createAction","credContainerDisplayName","h3","helptext","hiddenOnLg","right","isOpen","open","execute","visibleOnLg","hidden","CredentialAction","credRemover","SigningInPageWithRouter"],"mappings":"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","sourcesContent":["/*\r\n * Copyright 2018 Red Hat, Inc. and/or its affiliates.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *      http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport * as React from 'react';\r\n\r\nimport {withRouter, RouteComponentProps} from 'react-router-dom';\r\nimport {\r\n        Button,\r\n        DataList,\r\n        DataListAction,\r\n        DataListItemCells,\r\n        DataListCell,\r\n        DataListItem,\r\n        DataListItemRow,\r\n        Stack,\r\n        StackItem,\r\n        Title,\r\n        TitleLevel,\r\n        DataListActionVisibility,\r\n        Dropdown,\r\n        DropdownPosition,\r\n        KebabToggle,\r\n    } from '@patternfly/react-core';\r\n\r\nimport {AIACommand} from '../../util/AIACommand';\r\nimport TimeUtil from '../../util/TimeUtil';\r\nimport {HttpResponse, AccountServiceClient} from '../../account-service/account.service';\r\nimport {AccountServiceContext} from '../../account-service/AccountServiceContext';\r\nimport {ContinueCancelModal} from '../../widgets/ContinueCancelModal';\r\nimport {Features} from '../../widgets/features';\r\nimport {Msg} from '../../widgets/Msg';\r\nimport {ContentPage} from '../ContentPage';\r\nimport {ContentAlert} from '../ContentAlert';\r\nimport { KeycloakContext } from '../../keycloak-service/KeycloakContext';\r\nimport { KeycloakService } from '../../keycloak-service/keycloak.service';\r\nimport { css } from '@patternfly/react-styles';\r\n\r\ndeclare const features: Features;\r\n\r\ninterface PasswordDetails {\r\n    registered: boolean;\r\n    lastUpdate: number;\r\n}\r\n\r\ntype CredCategory = 'password' | 'two-factor' | 'passwordless';\r\ntype CredType = string;\r\ntype CredTypeMap = Map<CredType, CredentialContainer>;\r\ntype CredContainerMap = Map<CredCategory, CredTypeMap>;\r\n\r\ninterface UserCredential {\r\n    id: string;\r\n    type: string;\r\n    userLabel: string;\r\n    createdDate?: number;\r\n    strCreatedDate?: string;\r\n}\r\n\r\n// A CredentialContainer is unique by combo of credential type and credential category\r\ninterface CredentialContainer {\r\n    category: CredCategory;\r\n    type: CredType;\r\n    displayName: string;\r\n    helptext?: string;\r\n    createAction?: string;\r\n    updateAction?: string;\r\n    removeable: boolean;\r\n    userCredentials: UserCredential[];\r\n    open: boolean;\r\n}\r\n\r\ninterface SigningInPageProps extends RouteComponentProps {\r\n}\r\n\r\ninterface SigningInPageState {\r\n    // Credential containers organized by category then type\r\n    credentialContainers: CredContainerMap;\r\n}\r\n\r\n/**\r\n * @author Stan Silvert ssilvert@redhat.com (C) 2018 Red Hat Inc.\r\n */\r\nclass SigningInPage extends React.Component<SigningInPageProps, SigningInPageState> {\r\n    static contextType = AccountServiceContext;\r\n    context: React.ContextType<typeof AccountServiceContext>;\r\n\r\n    public constructor(props: SigningInPageProps, context: React.ContextType<typeof AccountServiceContext>) {\r\n        super(props);\r\n        this.context = context;\r\n    \r\n        this.state = {\r\n            credentialContainers: new Map(),\r\n        }\r\n\r\n        this.getCredentialContainers();\r\n    }\r\n\r\n    private getCredentialContainers(): void {\r\n        this.context!.doGet(\"/credentials\")\r\n            .then((response: HttpResponse<CredentialContainer[]>) => {\r\n\r\n                const allContainers: CredContainerMap = new Map();\r\n                const containers: CredentialContainer[] = response.data || [];\r\n                containers.forEach(container => {\r\n                    let categoryMap = allContainers.get(container.category);\r\n                    if (!categoryMap) {\r\n                        categoryMap = new Map();\r\n                        allContainers.set(container.category, categoryMap);\r\n                    }\r\n                    categoryMap.set(container.type, container);\r\n                });\r\n\r\n                this.setState({credentialContainers: allContainers});\r\n                console.log({allContainers})\r\n            });\r\n    }\r\n\r\n    private handleRemove = (credentialId: string, userLabel: string) => {\r\n      this.context!.doDelete(\"/credentials/\" + credentialId)\r\n        .then(() => {\r\n            this.getCredentialContainers();\r\n            ContentAlert.success('successRemovedMessage', [userLabel]);\r\n        });\r\n    }\r\n\r\n    public static credElementId(credType: CredType, credId: string, item: string): string {\r\n        return `${credType}-${item}-${credId.substring(0,8)}`;\r\n    }\r\n\r\n    public render(): React.ReactNode {\r\n        return (\r\n            <ContentPage title=\"signingIn\"\r\n                     introMessage=\"signingInSubMessage\">\r\n                <Stack gutter='md'>\r\n                    {this.renderCategories()}\r\n                </Stack>\r\n            </ContentPage>\r\n        );\r\n    }\r\n\r\n    private renderCategories(): React.ReactNode {\r\n        return (<> {\r\n            Array.from(this.state.credentialContainers.keys()).map(category => (\r\n                <StackItem key={category} isFilled>\r\n                    <Title id={`${category}-categ-title`} headingLevel={TitleLevel.h2} size='2xl'>\r\n                        <strong><Msg msgKey={category}/></strong>\r\n                    </Title>\r\n                    <DataList aria-label='foo'>\r\n                        {this.renderTypes(this.state.credentialContainers.get(category)!)}\r\n                    </DataList>\r\n                </StackItem>\r\n            ))\r\n\r\n        }</>)\r\n    }\r\n\r\n    private renderTypes(credTypeMap: CredTypeMap): React.ReactNode {\r\n        return (\r\n        <KeycloakContext.Consumer> \r\n        { keycloak => (\r\n            <>{\r\n            Array.from(credTypeMap.keys()).map((credType: CredType, index: number, typeArray: string[]) => ([\r\n                this.renderCredTypeTitle(credTypeMap.get(credType)!, keycloak!),\r\n                this.renderUserCredentials(credTypeMap, credType, keycloak!),\r\n                this.renderEmptyRow(credTypeMap.get(credType)!.type, index === typeArray.length - 1)\r\n            ]))\r\n            }</>\r\n        )}\r\n        </KeycloakContext.Consumer>\r\n        );\r\n    }\r\n\r\n    private renderEmptyRow(type: string, isLast: boolean): React.ReactNode {\r\n        if (isLast) return; // don't put empty row at the end\r\n\r\n        return (\r\n            <DataListItem aria-labelledby={'empty-list-item-' + type}>\r\n                <DataListItemRow key={'empty-row-' + type}>\r\n                    <DataListItemCells dataListCells={[<DataListCell></DataListCell>]}/>\r\n                </DataListItemRow>\r\n            </DataListItem>\r\n        )\r\n    }\r\n\r\n    private renderUserCredentials(credTypeMap: CredTypeMap, credType: CredType, keycloak: KeycloakService): React.ReactNode {\r\n        const credContainer: CredentialContainer = credTypeMap.get(credType)!;\r\n        const userCredentials: UserCredential[] = credContainer.userCredentials;\r\n        const removeable: boolean = credContainer.removeable;\r\n        const type: string = credContainer.type;\r\n        const displayName: string = credContainer.displayName;\r\n\r\n        if (!userCredentials || userCredentials.length === 0) {\r\n            const localizedDisplayName = Msg.localize(displayName);\r\n            return (\r\n                <DataListItem key='no-credentials-list-item' aria-labelledby='no-credentials-list-item'>\r\n                    <DataListItemRow key='no-credentials-list-item-row'>\r\n                        <DataListItemCells\r\n                                    dataListCells={[\r\n                                        <DataListCell key={'no-credentials-cell-0'}/>,\r\n                                        <strong id={`${type}-not-set-up`} key={'no-credentials-cell-1'}><Msg msgKey='notSetUp' params={[localizedDisplayName]}/></strong>,\r\n                                        <DataListCell key={'no-credentials-cell-2'}/>\r\n                                    ]}/>\r\n                    </DataListItemRow>\r\n                </DataListItem>\r\n            );\r\n        }\r\n\r\n        userCredentials.forEach(credential => {\r\n            if (!credential.userLabel) credential.userLabel = Msg.localize(credential.type);\r\n            if (credential.hasOwnProperty('createdDate') && credential.createdDate && credential.createdDate! > 0) {\r\n                credential.strCreatedDate = TimeUtil.format(credential.createdDate as number);\r\n            }\r\n        });\r\n\r\n        let updateAIA: AIACommand;\r\n        if (credContainer.updateAction) {\r\n            updateAIA = new AIACommand(keycloak, credContainer.updateAction);\r\n        }\r\n\r\n        return (\r\n            <React.Fragment key='userCredentials'> {\r\n                userCredentials.map(credential => (\r\n                    <DataListItem id={`${SigningInPage.credElementId(type, credential.id, 'row')}`} key={'credential-list-item-' + credential.id} aria-labelledby={'credential-list-item-' + credential.userLabel}>\r\n                        <DataListItemRow key={'userCredentialRow-' + credential.id}>\r\n                            <DataListItemCells dataListCells={this.credentialRowCells(credential, type)}/>\r\n\r\n                            <CredentialAction credential={credential}\r\n                                              removeable={removeable}\r\n                                              updateAction={updateAIA}\r\n                                              credRemover={this.handleRemove}/>\r\n                        </DataListItemRow>\r\n                    </DataListItem>\r\n                ))\r\n            }\r\n            </React.Fragment>)\r\n    }\r\n\r\n    private credentialRowCells(credential: UserCredential, type: string): React.ReactNode[] {\r\n        const credRowCells: React.ReactNode[] = [];\r\n        credRowCells.push(<DataListCell id={`${SigningInPage.credElementId(type, credential.id, 'label')}`} key={'userLabel-' + credential.id}>{credential.userLabel}</DataListCell>);\r\n        if (credential.strCreatedDate) {\r\n            credRowCells.push(<DataListCell id={`${SigningInPage.credElementId(type, credential.id, 'created-at')}`} key={'created-' + credential.id}><strong><Msg msgKey='credentialCreatedAt'/>: </strong>{credential.strCreatedDate}</DataListCell>);\r\n            credRowCells.push(<DataListCell key={'spacer-' + credential.id}/>);\r\n        }\r\n\r\n        return credRowCells;\r\n    }\r\n\r\n    private renderCredTypeTitle(credContainer: CredentialContainer, keycloak: KeycloakService): React.ReactNode {\r\n        if (!credContainer.hasOwnProperty('helptext') && !credContainer.hasOwnProperty('createAction')) return;\r\n\r\n        let setupAction: AIACommand;\r\n        if (credContainer.createAction) {\r\n            setupAction = new AIACommand(keycloak, credContainer.createAction);\r\n        }\r\n        const credContainerDisplayName: string = Msg.localize(credContainer.displayName);\r\n\r\n        return (\r\n            <React.Fragment key={'credTypeTitle-' + credContainer.type}>\r\n                <DataListItem aria-labelledby={'type-datalistitem-' + credContainer.type}>\r\n                    <DataListItemRow key={'credTitleRow-' + credContainer.type}>\r\n                        <DataListItemCells\r\n                            dataListCells={[\r\n                                <DataListCell width={5} key={'credTypeTitle-' + credContainer.type}>\r\n                                    <Title headingLevel={TitleLevel.h3} size='2xl'>\r\n                                        <strong id={`${credContainer.type}-cred-title`}><Msg msgKey={credContainer.displayName}/></strong>\r\n                                    </Title>\r\n                                    <span id={`${credContainer.type}-cred-help`}>\r\n                                        {credContainer.helptext && <Msg msgKey={credContainer.helptext}/>}\r\n                                    </span>\r\n                                </DataListCell>,\r\n\r\n                            ]}/>\r\n                        {credContainer.createAction &&\r\n                        <DataListAction\r\n                            aria-labelledby='create'\r\n                            aria-label='create action'\r\n                            id={'mob-setUpAction-' + credContainer.type}\r\n                            className={DataListActionVisibility.hiddenOnLg}\r\n                        >\r\n                            <Dropdown\r\n                                isPlain\r\n                                position={DropdownPosition.right}\r\n                                toggle={<KebabToggle onToggle={isOpen => {\r\n                                    credContainer.open = isOpen;\r\n                                    this.setState({ credentialContainers: new Map(this.state.credentialContainers) });\r\n                                }} />}\r\n                                isOpen={credContainer.open}\r\n                                dropdownItems={[\r\n                                    <button id={`mob-${credContainer.type}-set-up`} className=\"pf-c-button pf-m-link\" type=\"button\" onClick={() => setupAction.execute()}>\r\n                                        <span className=\"pf-c-button__icon\">\r\n                                            <i className=\"fas fa-plus-circle\" aria-hidden=\"true\"></i>\r\n                                        </span>\r\n                                        <Msg msgKey='setUpNew' params={[credContainerDisplayName]} />\r\n                                    </button>]}\r\n                            />\r\n                        </DataListAction>}\r\n                        {credContainer.createAction &&\r\n                        <DataListAction\r\n                            aria-labelledby='create'\r\n                            aria-label='create action'\r\n                            id={'setUpAction-' + credContainer.type}\r\n                            className={css(DataListActionVisibility.visibleOnLg, DataListActionVisibility.hidden)}\r\n                        >\r\n                            <button id={`${credContainer.type}-set-up`} className=\"pf-c-button pf-m-link\" type=\"button\" onClick={()=> setupAction.execute()}>\r\n                                <span className=\"pf-c-button__icon\">\r\n                                    <i className=\"fas fa-plus-circle\" aria-hidden=\"true\"></i>\r\n                                </span>\r\n                                <Msg msgKey='setUpNew' params={[credContainerDisplayName]}/>\r\n                            </button>\r\n                        </DataListAction>}\r\n                    </DataListItemRow>\r\n                </DataListItem>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n\r\n};\r\n\r\ntype CredRemover = (credentialId: string, userLabel: string) => void;\r\ninterface CredentialActionProps {credential: UserCredential;\r\n                                removeable: boolean;\r\n                                updateAction: AIACommand;\r\n                                credRemover: CredRemover;};\r\nclass CredentialAction extends React.Component<CredentialActionProps> {\r\n\r\n    render(): React.ReactNode {\r\n        if (this.props.updateAction) {\r\n            return (\r\n                <DataListAction aria-labelledby='foo' aria-label='foo action' id={'updateAction-' + this.props.credential.id}>\r\n                    <Button id={`${SigningInPage.credElementId(this.props.credential.type, this.props.credential.id, 'update')}`} variant='primary'onClick={()=> this.props.updateAction.execute()}><Msg msgKey='update'/></Button>\r\n                </DataListAction>\r\n            )\r\n        }\r\n\r\n        if (this.props.removeable) {\r\n            const userLabel: string = this.props.credential.userLabel;\r\n            return (\r\n                <DataListAction aria-labelledby='foo' aria-label='foo action' id={'removeAction-' + this.props.credential.id }>\r\n                    <ContinueCancelModal buttonTitle='remove'\r\n                                        buttonId={`${SigningInPage.credElementId(this.props.credential.type, this.props.credential.id, 'remove')}`}\r\n                                        modalTitle={Msg.localize('removeCred', [userLabel])}\r\n                                        modalMessage={Msg.localize('stopUsingCred', [userLabel])}\r\n                                        onContinue={() => this.props.credRemover(this.props.credential.id, userLabel)}\r\n                                            />\r\n                </DataListAction>\r\n            )\r\n        }\r\n\r\n        return (<></>)\r\n    }\r\n}\r\n\r\nconst SigningInPageWithRouter = withRouter(SigningInPage);\r\nexport { SigningInPageWithRouter as SigningInPage};"],"file":"SigningInPage.js"}